{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { getItemCount } from '@react-stately/collections';\nimport { isFocusVisible, useKeyboard } from '@react-aria/interactions';\nimport { useHover, usePress } from '@react-native-aria/interactions';\nimport { mapDomPropsToRN } from '@react-native-aria/utils';\nimport { mergeProps, useSlotId } from '@react-aria/utils';\nimport { useSelectableItem } from '@react-aria/selection';\nexport function useMenuItem(props, state, ref) {\n  var isSelected = props.isSelected,\n    isDisabled = props.isDisabled,\n    key = props.key,\n    onClose = props.onClose,\n    _props$closeOnSelect = props.closeOnSelect,\n    closeOnSelect = _props$closeOnSelect === void 0 ? true : _props$closeOnSelect,\n    isVirtualized = props.isVirtualized,\n    onAction = props.onAction;\n  var role = 'menuitem';\n  if (state.selectionManager.selectionMode === 'single') {\n    role = 'menuitemradio';\n  } else if (state.selectionManager.selectionMode === 'multiple') {\n    role = 'menuitemcheckbox';\n  }\n  var labelId = useSlotId();\n  var descriptionId = useSlotId();\n  var keyboardId = useSlotId();\n  var ariaProps = {\n    'aria-disabled': isDisabled,\n    role: role,\n    'aria-label': props['aria-label'],\n    'aria-labelledby': labelId,\n    'aria-describedby': [descriptionId, keyboardId].filter(Boolean).join(' ') || undefined\n  };\n  if (state.selectionManager.selectionMode !== 'none') {\n    ariaProps['aria-checked'] = isSelected;\n  }\n  if (isVirtualized) {\n    ariaProps['aria-posinset'] = state.collection.getItem(key).index;\n    ariaProps['aria-setsize'] = getItemCount(state.collection);\n  }\n  var onPressStart = function onPressStart(e) {\n    if (e.pointerType === 'keyboard' && onAction) {\n      onAction(key);\n    }\n  };\n  var onPress = function onPress() {\n    if (closeOnSelect && onClose) {\n      onClose();\n    }\n  };\n  var onPressUp = function onPressUp(e) {\n    if (e.pointerType !== 'keyboard') {\n      if (onAction) {\n        onAction(key);\n      }\n    }\n  };\n  var _useSelectableItem = useSelectableItem({\n      selectionManager: state.selectionManager,\n      key: key,\n      ref: ref,\n      shouldSelectOnPressUp: true\n    }),\n    itemProps = _useSelectableItem.itemProps;\n  var _usePress = usePress(mergeProps({\n      onPressStart: onPressStart,\n      onPressUp: onPressUp,\n      onPress: onPress,\n      isDisabled: isDisabled\n    }, mapDomPropsToRN(itemProps))),\n    pressProps = _usePress.pressProps;\n  var _useHover = useHover({\n      isDisabled: isDisabled,\n      onHoverStart: function onHoverStart() {\n        if (!isFocusVisible()) {\n          state.selectionManager.setFocused(true);\n          state.selectionManager.setFocusedKey(key);\n        }\n      }\n    }, ref),\n    hoverProps = _useHover.hoverProps;\n  var _useKeyboard = useKeyboard({\n      onKeyDown: function onKeyDown(e) {\n        if (e.repeat) {\n          e.continuePropagation();\n          return;\n        }\n        switch (e.key) {\n          case ' ':\n            if (!isDisabled && closeOnSelect && onClose) {\n              onClose();\n            }\n            break;\n          case 'Enter':\n            if (!isDisabled && closeOnSelect && onClose) {\n              onClose();\n            }\n            break;\n          default:\n            e.continuePropagation();\n            break;\n        }\n      }\n    }),\n    keyboardProps = _useKeyboard.keyboardProps;\n  return {\n    menuItemProps: _objectSpread(_objectSpread({}, mapDomPropsToRN(ariaProps)), mergeProps(pressProps, hoverProps, keyboardProps)),\n    labelProps: {\n      id: labelId\n    },\n    descriptionProps: {\n      id: descriptionId\n    },\n    keyboardShortcutProps: {\n      id: keyboardId\n    }\n  };\n}","map":{"version":3,"names":["getItemCount","isFocusVisible","useKeyboard","useHover","usePress","mapDomPropsToRN","mergeProps","useSlotId","useSelectableItem","useMenuItem","props","state","ref","isSelected","isDisabled","key","onClose","_props$closeOnSelect","closeOnSelect","isVirtualized","onAction","role","selectionManager","selectionMode","labelId","descriptionId","keyboardId","ariaProps","filter","Boolean","join","undefined","collection","getItem","index","onPressStart","e","pointerType","onPress","onPressUp","_useSelectableItem","shouldSelectOnPressUp","itemProps","_usePress","pressProps","_useHover","onHoverStart","setFocused","setFocusedKey","hoverProps","_useKeyboard","onKeyDown","repeat","continuePropagation","keyboardProps","menuItemProps","_objectSpread","labelProps","id","descriptionProps","keyboardShortcutProps"],"sources":["D:\\React Native\\Expo+glustack\\NoteSketch\\node_modules\\@react-native-aria\\menu\\src\\useMenuItem.web.ts"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport { getItemCount } from '@react-stately/collections';\nimport { Key, RefObject } from 'react';\nimport { isFocusVisible, useKeyboard } from '@react-aria/interactions';\nimport { useHover, usePress } from '@react-native-aria/interactions';\nimport { mapDomPropsToRN } from '@react-native-aria/utils';\nimport { mergeProps, useSlotId } from '@react-aria/utils';\nimport { PressEvent } from '@react-types/shared';\nimport { TreeState } from '@react-stately/tree';\nimport { useSelectableItem } from '@react-aria/selection';\nimport { ViewProps } from 'react-native';\ninterface MenuItemAria {\n  /** Props for the menu item element. */\n  menuItemProps: ViewProps;\n\n  /** Props for the main text element inside the menu item. */\n  labelProps: ViewProps;\n\n  /** Props for the description text element inside the menu item, if any. */\n  descriptionProps: ViewProps;\n\n  /** Props for the keyboard shortcut text element inside the item, if any. */\n  keyboardShortcutProps: ViewProps;\n}\n\ninterface AriaMenuItemProps {\n  /** Whether the menu item is disabled. */\n  'isDisabled'?: boolean;\n\n  /** Whether the menu item is selected. */\n  'isSelected'?: boolean;\n\n  /** A screen reader only label for the menu item. */\n  'aria-label'?: string;\n\n  /** The unique key for the menu item. */\n  'key'?: any;\n\n  /** Handler that is called when the menu should close after selecting an item. */\n  'onClose'?: () => void;\n\n  /**\n   * Whether the menu should close when the menu item is selected.\n   * @default true\n   */\n  'closeOnSelect'?: boolean;\n\n  /** Whether the menu item is contained in a virtual scrolling menu. */\n  'isVirtualized'?: boolean;\n\n  /** Handler that is called when the user activates the item. */\n  'onAction'?: (key: Key) => void;\n}\n\n/**\n * Provides the behavior and accessibility implementation for an item in a menu.\n * See `useMenu` for more details about menus.\n * @param props - Props for the item.\n * @param state - State for the menu, as returned by `useTreeState`.\n */\nexport function useMenuItem<T>(\n  props: AriaMenuItemProps,\n  state: TreeState<T>,\n  ref: RefObject<HTMLElement>\n): MenuItemAria {\n  let {\n    isSelected,\n    isDisabled,\n    key,\n    onClose,\n    closeOnSelect = true,\n    isVirtualized,\n    onAction,\n  } = props;\n\n  let role = 'menuitem';\n  if (state.selectionManager.selectionMode === 'single') {\n    role = 'menuitemradio';\n  } else if (state.selectionManager.selectionMode === 'multiple') {\n    role = 'menuitemcheckbox';\n  }\n\n  let labelId = useSlotId();\n  let descriptionId = useSlotId();\n  let keyboardId = useSlotId();\n\n  let ariaProps: any = {\n    'aria-disabled': isDisabled,\n    role,\n    'aria-label': props['aria-label'],\n    'aria-labelledby': labelId,\n    'aria-describedby':\n      [descriptionId, keyboardId].filter(Boolean).join(' ') || undefined,\n  };\n  if (state.selectionManager.selectionMode !== 'none') {\n    ariaProps['aria-checked'] = isSelected;\n  }\n\n  if (isVirtualized) {\n    ariaProps['aria-posinset'] = state.collection.getItem(key).index;\n    ariaProps['aria-setsize'] = getItemCount(state.collection);\n  }\n\n  let onPressStart = (e: PressEvent) => {\n    if (e.pointerType === 'keyboard' && onAction) {\n      onAction(key);\n    }\n  };\n\n  let onPress = () => {\n    if (closeOnSelect && onClose) {\n      onClose();\n    }\n  };\n  let onPressUp = (e: PressEvent) => {\n    if (e.pointerType !== 'keyboard') {\n      if (onAction) {\n        onAction(key);\n      }\n    }\n  };\n\n  let { itemProps } = useSelectableItem({\n    selectionManager: state.selectionManager,\n    key,\n    ref,\n    shouldSelectOnPressUp: true,\n  });\n\n  let { pressProps } = usePress(\n    mergeProps(\n      { onPressStart, onPressUp, onPress, isDisabled },\n      mapDomPropsToRN(itemProps)\n    )\n  );\n\n  let { hoverProps } = useHover(\n    {\n      isDisabled,\n      onHoverStart() {\n        if (!isFocusVisible()) {\n          state.selectionManager.setFocused(true);\n          state.selectionManager.setFocusedKey(key);\n        }\n      },\n    },\n    ref\n  );\n\n  const { keyboardProps } = useKeyboard({\n    onKeyDown: (e) => {\n      // Ignore repeating events, which may have started on the menu trigger before moving\n      // focus to the menu item. We want to wait for a second complete key press sequence.\n      if (e.repeat) {\n        e.continuePropagation();\n        return;\n      }\n      switch (e.key) {\n        case ' ':\n          if (!isDisabled && closeOnSelect && onClose) {\n            onClose();\n          }\n          break;\n        case 'Enter':\n          // The Enter key should always close on select, except if overridden.\n          if (!isDisabled && closeOnSelect && onClose) {\n            onClose();\n          }\n          break;\n        default:\n          e.continuePropagation();\n          break;\n      }\n    },\n  });\n\n  return {\n    menuItemProps: {\n      ...mapDomPropsToRN(ariaProps),\n      ...mergeProps(pressProps, hoverProps, keyboardProps),\n    },\n    labelProps: {\n      id: labelId,\n    },\n    descriptionProps: {\n      id: descriptionId,\n    },\n    keyboardShortcutProps: {\n      id: keyboardId,\n    },\n  };\n}\n"],"mappings":";;;AAYA,SAASA,YAAY,QAAQ,4BAA4B;AAEzD,SAASC,cAAc,EAAEC,WAAW,QAAQ,0BAA0B;AACtE,SAASC,QAAQ,EAAEC,QAAQ,QAAQ,iCAAiC;AACpE,SAASC,eAAe,QAAQ,0BAA0B;AAC1D,SAASC,UAAU,EAAEC,SAAS,QAAQ,mBAAmB;AAGzD,SAASC,iBAAiB,QAAQ,uBAAuB;AAmDzD,OAAO,SAASC,WAAWA,CACzBC,KAAwB,EACxBC,KAAmB,EACnBC,GAA2B,EACb;EACd,IACEC,UAAU,GAORH,KAAK,CAPPG,UAAU;IACVC,UAAU,GAMRJ,KAAK,CANPI,UAAU;IACVC,GAAG,GAKDL,KAAK,CALPK,GAAG;IACHC,OAAO,GAILN,KAAK,CAJPM,OAAO;IAAAC,oBAAA,GAILP,KAAK,CAHPQ,aAAa;IAAbA,aAAa,GAAAD,oBAAA,cAAG,IAAI,GAAAA,oBAAA;IACpBE,aAAa,GAEXT,KAAK,CAFPS,aAAa;IACbC,QAAA,GACEV,KAAK,CADPU,QAAA;EAGF,IAAIC,IAAI,GAAG,UAAU;EACrB,IAAIV,KAAK,CAACW,gBAAgB,CAACC,aAAa,KAAK,QAAQ,EAAE;IACrDF,IAAI,GAAG,eAAe;EACxB,CAAC,MAAM,IAAIV,KAAK,CAACW,gBAAgB,CAACC,aAAa,KAAK,UAAU,EAAE;IAC9DF,IAAI,GAAG,kBAAkB;EAC3B;EAEA,IAAIG,OAAO,GAAGjB,SAAS,CAAC,CAAC;EACzB,IAAIkB,aAAa,GAAGlB,SAAS,CAAC,CAAC;EAC/B,IAAImB,UAAU,GAAGnB,SAAS,CAAC,CAAC;EAE5B,IAAIoB,SAAc,GAAG;IACnB,eAAe,EAAEb,UAAU;IAC3BO,IAAI,EAAJA,IAAI;IACJ,YAAY,EAAEX,KAAK,CAAC,YAAY,CAAC;IACjC,iBAAiB,EAAEc,OAAO;IAC1B,kBAAkB,EAChB,CAACC,aAAa,EAAEC,UAAU,CAAC,CAACE,MAAM,CAACC,OAAO,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,IAAIC;EAC7D,CAAC;EACD,IAAIpB,KAAK,CAACW,gBAAgB,CAACC,aAAa,KAAK,MAAM,EAAE;IACnDI,SAAS,CAAC,cAAc,CAAC,GAAGd,UAAU;EACxC;EAEA,IAAIM,aAAa,EAAE;IACjBQ,SAAS,CAAC,eAAe,CAAC,GAAGhB,KAAK,CAACqB,UAAU,CAACC,OAAO,CAAClB,GAAG,CAAC,CAACmB,KAAK;IAChEP,SAAS,CAAC,cAAc,CAAC,GAAG3B,YAAY,CAACW,KAAK,CAACqB,UAAU,CAAC;EAC5D;EAEA,IAAIG,YAAY,GAAI,SAAhBA,YAAYA,CAAIC,CAAa,EAAK;IACpC,IAAIA,CAAC,CAACC,WAAW,KAAK,UAAU,IAAIjB,QAAQ,EAAE;MAC5CA,QAAQ,CAACL,GAAG,CAAC;IACf;EACF,CAAC;EAED,IAAIuB,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;IAClB,IAAIpB,aAAa,IAAIF,OAAO,EAAE;MAC5BA,OAAO,CAAC,CAAC;IACX;EACF,CAAC;EACD,IAAIuB,SAAS,GAAI,SAAbA,SAASA,CAAIH,CAAa,EAAK;IACjC,IAAIA,CAAC,CAACC,WAAW,KAAK,UAAU,EAAE;MAChC,IAAIjB,QAAQ,EAAE;QACZA,QAAQ,CAACL,GAAG,CAAC;MACf;IACF;EACF,CAAC;EAED,IAAAyB,kBAAA,GAAoBhC,iBAAiB,CAAC;MACpCc,gBAAgB,EAAEX,KAAK,CAACW,gBAAgB;MACxCP,GAAG,EAAHA,GAAG;MACHH,GAAG,EAAHA,GAAG;MACH6B,qBAAqB,EAAE;IACzB,CAAC,CAAC;IALIC,SAAA,GAAAF,kBAAA,CAAAE,SAAA;EAON,IAAAC,SAAA,GAAqBvC,QAAQ,CAC3BE,UAAU,CACR;MAAE6B,YAAY,EAAZA,YAAY;MAAEI,SAAS,EAATA,SAAS;MAAED,OAAO,EAAPA,OAAO;MAAExB,UAAA,EAAAA;IAAW,CAAC,EAChDT,eAAe,CAACqC,SAAS,CAC3B,CACF,CAAC;IALKE,UAAA,GAAAD,SAAA,CAAAC,UAAA;EAON,IAAAC,SAAA,GAAqB1C,QAAQ,CAC3B;MACEW,UAAU,EAAVA,UAAU;MACVgC,YAAY,WAAAA,aAAA,EAAG;QACb,IAAI,CAAC7C,cAAc,CAAC,CAAC,EAAE;UACrBU,KAAK,CAACW,gBAAgB,CAACyB,UAAU,CAAC,IAAI,CAAC;UACvCpC,KAAK,CAACW,gBAAgB,CAAC0B,aAAa,CAACjC,GAAG,CAAC;QAC3C;MACF;IACF,CAAC,EACDH,GACF,CAAC;IAXKqC,UAAA,GAAAJ,SAAA,CAAAI,UAAA;EAaN,IAAAC,YAAA,GAA0BhD,WAAW,CAAC;MACpCiD,SAAS,EAAG,SAAAA,UAAAf,CAAC,EAAK;QAGhB,IAAIA,CAAC,CAACgB,MAAM,EAAE;UACZhB,CAAC,CAACiB,mBAAmB,CAAC,CAAC;UACvB;QACF;QACA,QAAQjB,CAAC,CAACrB,GAAG;UACX,KAAK,GAAG;YACN,IAAI,CAACD,UAAU,IAAII,aAAa,IAAIF,OAAO,EAAE;cAC3CA,OAAO,CAAC,CAAC;YACX;YACA;UACF,KAAK,OAAO;YAEV,IAAI,CAACF,UAAU,IAAII,aAAa,IAAIF,OAAO,EAAE;cAC3CA,OAAO,CAAC,CAAC;YACX;YACA;UACF;YACEoB,CAAC,CAACiB,mBAAmB,CAAC,CAAC;YACvB;QACJ;MACF;IACF,CAAC,CAAC;IAzBMC,aAAA,GAAAJ,YAAA,CAAAI,aAAA;EA2BR,OAAO;IACLC,aAAa,EAAAC,aAAA,CAAAA,aAAA,KACRnD,eAAe,CAACsB,SAAS,CAAC,GAC1BrB,UAAU,CAACsC,UAAU,EAAEK,UAAU,EAAEK,aAAa,EACpD;IACDG,UAAU,EAAE;MACVC,EAAE,EAAElC;IACN,CAAC;IACDmC,gBAAgB,EAAE;MAChBD,EAAE,EAAEjC;IACN,CAAC;IACDmC,qBAAqB,EAAE;MACrBF,EAAE,EAAEhC;IACN;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}